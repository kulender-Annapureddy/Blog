{"ast":null,"code":"var _jsxFileName = \"D:\\\\for cv\\\\Blog\\\\client\\\\src\\\\pages\\\\EditPost.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Navigate, useParams } from 'react-router-dom';\nimport ReactQuill from 'react-quill';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst modules = {\n  toolbar: [[{\n    'header': [1, 2, false]\n  }], ['bold', 'italic', 'underline', 'strike', 'blockquote'], [{\n    'list': 'ordered'\n  }, {\n    'list': 'bullet'\n  }, {\n    'indent': '-1'\n  }, {\n    'indent': '+1'\n  }], ['link', 'image'], ['clean']]\n};\nconst formats = ['header', 'bold', 'italic', 'underline', 'strike', 'blockquote', 'list', 'bullet', 'indent', 'link', 'image'];\nfunction EditPost() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const [title, setTitle] = useState('');\n  const [summary, setSummary] = useState('');\n  const [content, setContent] = useState('');\n  const [files, setFiles] = useState('');\n  const [redirect, setRedirect] = useState(false);\n  useEffect(() => {\n    fetch('http://localhost:2000/post/' + id).then(response => {\n      response.json().then(postInfo => {\n        setTitle(postInfo.title);\n        setSummary(postInfo.summary);\n        setContent(postInfo.content);\n      });\n    });\n  }, []);\n  const updatePost = async e => {\n    e.preventDefault();\n    const data = new FormData();\n    data.set(\"title\", title);\n    data.set('summary', summary);\n    data.set('content', content);\n    data.set('id', id);\n    if (files !== null && files !== void 0 && files[0]) {\n      data.set('file', files === null || files === void 0 ? void 0 : files[0]);\n    }\n    const response = await fetch('http://localhost:2000/post', {\n      method: 'PUT',\n      body: data,\n      credentials: 'include'\n    });\n    if (response.ok) {\n      // setRedirect(true);\n    }\n  };\n  if (redirect) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: '/post/' + id\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: updatePost,\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"title\",\n      placeholder: \"Title\",\n      value: title,\n      onChange: e => setTitle(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"summary\",\n      placeholder: \"summary\",\n      value: summary,\n      onChange: e => setSummary(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      onChange: e => setFiles(e.target.files)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ReactQuill, {\n      value: content,\n      onChange: newValue => setContent(newValue),\n      modules: modules,\n      formats: formats\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      style: {\n        marginTop: '5px'\n      },\n      children: \"Update Post\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n}\n_s(EditPost, \"xR2TQkCYOPcJrGHyKMKAJzJGV8Q=\", false, function () {\n  return [useParams];\n});\n_c = EditPost;\nexport default EditPost;\nvar _c;\n$RefreshReg$(_c, \"EditPost\");","map":{"version":3,"names":["React","useEffect","useState","Navigate","useParams","ReactQuill","jsxDEV","_jsxDEV","modules","toolbar","formats","EditPost","_s","id","title","setTitle","summary","setSummary","content","setContent","files","setFiles","redirect","setRedirect","fetch","then","response","json","postInfo","updatePost","e","preventDefault","data","FormData","set","method","body","credentials","ok","to","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","children","type","placeholder","value","onChange","target","newValue","style","marginTop","_c","$RefreshReg$"],"sources":["D:/for cv/Blog/client/src/pages/EditPost.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { Navigate, useParams } from 'react-router-dom';\r\nimport ReactQuill from 'react-quill';\r\n\r\nconst  modules = {\r\n    toolbar: [\r\n      [{ 'header': [1, 2, false] }],\r\n      ['bold', 'italic', 'underline','strike', 'blockquote'],\r\n      [{'list': 'ordered'}, {'list': 'bullet'}, {'indent': '-1'}, {'indent': '+1'}],\r\n      ['link', 'image'],\r\n      ['clean']\r\n    ],\r\n  };\r\n  const formats = [\r\n    'header',\r\n    'bold', 'italic', 'underline', 'strike', 'blockquote',\r\n    'list', 'bullet', 'indent',\r\n    'link', 'image'\r\n  ]\r\n\r\nfunction EditPost() {\r\n    const {id} = useParams();\r\n    const [title, setTitle] = useState('');\r\n    const [summary, setSummary] = useState('');\r\n    const [content, setContent] = useState('');\r\n    const [files, setFiles] = useState('');\r\n    const [redirect, setRedirect] = useState(false);\r\n\r\n    useEffect(() => {\r\n        fetch('http://localhost:2000/post/' +id)\r\n    .then(response => {\r\n        response.json().then(postInfo => {\r\n            setTitle(postInfo.title);\r\n            setSummary(postInfo.summary);\r\n            setContent(postInfo.content);\r\n        })\r\n    })\r\n    }, [])\r\n    \r\n    const updatePost = async(e) =>{\r\n        e.preventDefault();\r\n\r\n        const data = new FormData();\r\n        data.set(\"title\", title);\r\n        data.set('summary', summary);\r\n        data.set('content', content);\r\n        data.set('id', id);\r\n        if(files ?.[0]) {\r\n            data.set('file', files?.[0]);\r\n        }\r\n        \r\n\r\n  const response= await fetch('http://localhost:2000/post', {\r\n method: 'PUT',\r\n body:data,\r\n credentials:'include',\r\n\r\n});\r\nif(response.ok){\r\n    // setRedirect(true);\r\n}\r\n\r\n    }\r\n\r\n    if(redirect){\r\n        return <Navigate to={'/post/' + id} />\r\n   }\r\n    return (\r\n        <form onSubmit={updatePost}>\r\n            <input type='title' placeholder='Title'\r\n            value={title}\r\n            onChange={(e) => setTitle(e.target.value)}></input>\r\n            <input type='summary' placeholder='summary'\r\n            value={summary}\r\n            onChange={(e) => setSummary(e.target.value)}></input>\r\n            <input  type='file' onChange={e => setFiles(e.target.files)} />\r\n            <ReactQuill  value={content} \r\n            onChange={newValue => setContent(newValue)}\r\n            modules={modules} formats={formats}/>\r\n            <button style={{marginTop:'5px'}}>Update Post</button>\r\n        </form>\r\n      )\r\n}\r\n\r\nexport default EditPost"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}